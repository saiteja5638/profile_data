sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/Device","sap/m/Text","sap/m/TextArea","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(e,t,a,r,l){"use strict";return e.extend("project1.controller.View1",{onInit:function(){if(!this.Create){this.Create=sap.ui.xmlfragment("project1.view.create",this)}if(!this.Create1){this.Create1=sap.ui.xmlfragment("project1.view.multiple",this)}this.onAfterRendering()},onAfterRendering:function(){var e=this.getOwnerComponent().getModel("oData");var t=new sap.ui.model.json.JSONModel;e.read("/Interactions_Student",{success:function(e){t.setData({items:e.results})},error:function(e){console.log(e)}});this.getView().setModel(t)},onCreate:function(){this.Create1.open()},onCloseCreate:function(){this.Create1.close()},FragmentCreateSub:function(){var e=0;var t=this.getOwnerComponent().getModel("oData");var a=sap.ui.getCore().byId("EmpId").getValue();var r=sap.ui.getCore().byId("EmpName").getValue();var l=sap.ui.getCore().byId("EmpJdate").getValue();var o=sap.ui.getCore().byId("EmpContact").getValue();var s=sap.ui.getCore().byId("EmpEmail").getValue();var n=sap.ui.getCore().byId("EmpRole").getValue();var i=this.byId("Table").getSelectedItem();var g=this.byId("Table").getItems().length;for(var u=0;u<g;u++){if(parseInt(a)==parseInt(this.byId("Table").getItems()[u].getCells()[0].getText())){e=e+1}}if(e>=1){var p=i.getCells()[0].getProperty("text");t.callFunction("/crud",{method:"GET",urlParameters:{FLAG:"U",ID:p,NAME:r,DATEOFBIRTH:l,CONTACT:o,EMAIL:s,ADDRESS:n},success:function(e){console.log("success")},error:function(e){console.log(e)}})}else{t.callFunction("/crud",{method:"GET",urlParameters:{FLAG:"C",ID:a,NAME:r,DATEOFBIRTH:l,CONTACT:o,EMAIL:s,ADDRESS:n},success:function(e){console.log(e)},error:function(e){console.log(e)}})}this.Create.close();var d=sap.ui.getCore().byId("EmpId").setValue("");var r=sap.ui.getCore().byId("EmpName").setValue("");var l=sap.ui.getCore().byId("EmpJdate").setValue("");var o=sap.ui.getCore().byId("EmpContact").setValue("");var s=sap.ui.getCore().byId("EmpEmail").setValue("");var n=sap.ui.getCore().byId("EmpRole").setValue("");window.location.reload()},onDeleteDataEmploye:function(){var e=[];var t=this.byId("Table");var a=this.getOwnerComponent().getModel("oData");for(var r=0;r<t.getSelectedItems().length;r++){if(t.getSelectedItems()[r].getProperty("selected")===true){var l=t.getSelectedItems()[r].getCells()[0].getProperty("text");var o={ID:l};e.push(o)}}a.callFunction("/crud",{method:"GET",urlParameters:{FLAG:"D",Data:JSON.stringify(e)},success:function(){console.log("successfully deleted")},error:function(e){console.log(e)}});a.refresh(true);window.location.reload()},onUpdateDataEmployee:function(){var e=this.byId("Table").getSelectedItem();if(e){this.Create.open();var t=e.getCells()[0].getProperty("text");var a=e.getCells()[1].getProperty("text");var r=e.getCells()[2].getProperty("text");var l=e.getCells()[3].getProperty("text");var o=e.getCells()[4].getProperty("text");var s=e.getCells()[5].getProperty("text");sap.ui.getCore().byId("EmpId").setValue(t);sap.ui.getCore().byId("EmpName").setValue(a);sap.ui.getCore().byId("EmpJdate").setValue(r);sap.ui.getCore().byId("EmpContact").setValue(l);sap.ui.getCore().byId("EmpEmail").setValue(o);sap.ui.getCore().byId("EmpRole").setValue(s)}else{alert("Please Select the row")}},onSearch:function(e){var t=e.getParameters().newValue;var a=[];if(t&&t.length>0){a.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("ID",sap.ui.model.FilterOperator.EQ,t),new sap.ui.model.Filter("NAME",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("ADDRESS",sap.ui.model.FilterOperator.Contains,t)],and:false}))}var r=this.getView().byId("Table");var l=r.getBinding("items");l.filter(a)},Change_view:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("View2")},multi_update:function(){var e=[];var t=this.byId("Table");for(var a=0;a<t.getSelectedItems().length;a++){if(t.getSelectedItems()[a].getProperty("selected")===true){var r={ID:t.getSelectedItems()[a].getCells()[0].getProperty("text"),NAME:t.getSelectedItems()[a].getCells()[1].getProperty("text"),DATEOFBIRTH:t.getSelectedItems()[a].getCells()[2].getProperty("text"),CONTACT:t.getSelectedItems()[a].getCells()[3].getProperty("text"),EMAIL:t.getSelectedItems()[a].getCells()[4].getProperty("text"),ADDRESS:t.getSelectedItems()[a].getCells()[5].getProperty("text")};e.push(r)}}var l=this.getOwnerComponent().getModel("ogmodel");l.setData({items:e});var o=l.getData().items.length;var s=l.getData().items;for(var n=0;n<o;n++){var i=new sap.m.Input({placeholder:"input1",value:s[n].ID});var g=new sap.m.Input({placeholder:"input2",value:s[n].NAME});var u=new sap.m.DatePicker({value:s[n].DATEOFBIRTH});var p=new sap.m.Input({placeholder:"input4",value:s[n].CONTACT});var d=new sap.m.Input({placeholder:"input5",value:s[n].EMAIL});var m=new sap.m.Input({placeholder:"input6",value:s[n].ADDRESS});var c=new sap.m.Button({text:"Remove",press:[this.onRemoveItem,this],type:"Reject"});var v=sap.ui.getCore().byId("Table");var C=new sap.m.ColumnListItem;C.addCell(i);C.addCell(g);C.addCell(u);C.addCell(p);C.addCell(d);C.addCell(m);C.addCell(c);v.addItem(C)}this.Create1.open()},save_FragmentData:function(){var e=0;var t=this.getOwnerComponent().getModel("oData");var a=this.getOwnerComponent().getModel("ogmodel");var r=sap.ui.getCore().byId("Table");var l=r.getItems().length;var o=Object.keys(t.oData).length;for(var s=0;s<o;s++){for(var n=0;n<l;n++){if(this.getView().byId("Table").getItems()[s].getCells()[0].getProperty("text")===r.getItems()[n].getCells()[0].getProperty("value")){e=e+1}}}if(e>0){var i=[];for(var s=0;s<l;s++){var g={ID:r.getItems()[s].getCells()[0].getProperty("value"),NAME:r.getItems()[s].getCells()[1].getProperty("value"),DATEOFBIRTH:r.getItems()[s].getCells()[2].getProperty("value"),CONTACT:r.getItems()[s].getCells()[3].getProperty("value"),EMAIL:r.getItems()[s].getCells()[4].getProperty("value"),ADDRESS:r.getItems()[s].getCells()[5].getProperty("value")};i.push(g)}t.callFunction("/crud",{method:"GET",urlParameters:{FLAG:"U",Data:JSON.stringify(i)},success:function(e){console.log("successfully updated")},error:function(e){console.log(e)}})}else{var i=[];for(var s=0;s<l;s++){var g={ID:r.getItems()[s].getCells()[0].getProperty("value"),NAME:r.getItems()[s].getCells()[1].getProperty("value"),DATEOFBIRTH:r.getItems()[s].getCells()[2].getProperty("value"),CONTACT:r.getItems()[s].getCells()[3].getProperty("value"),EMAIL:r.getItems()[s].getCells()[4].getProperty("value"),ADDRESS:r.getItems()[s].getCells()[5].getProperty("value")};i.push(g)}t.callFunction("/crud",{method:"GET",urlParameters:{FLAG:"C",Data:JSON.stringify(i)},success:function(e){console.log("successfully created")},error:function(e){console.log(e)}})}window.location.reload();this.Create1.close()},addRow:function(){var e=new sap.m.Input({placeholder:"ID"});var t=new sap.m.Input({placeholder:"Name"});var a=new sap.m.DatePicker({});var r=new sap.m.Input({placeholder:"Contact"});var l=new sap.m.Input({placeholder:"Email"});var o=new sap.m.Input({placeholder:"Address"});var s=new sap.m.Button({text:"Remove",press:[this.onRemoveItem,this],type:"Reject"});var n=sap.ui.getCore().byId("Table");var i=new sap.m.ColumnListItem;i.addCell(e);i.addCell(t);i.addCell(a);i.addCell(r);i.addCell(l);i.addCell(o);i.addCell(s);n.addItem(i)},onRemoveItem:function(e){var t=sap.ui.getCore().byId("Table");t.removeItem(e.getSource().getParent())}})});